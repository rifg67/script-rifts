#!/bin/bash

BlueCyan='\e[5;36m'
Xark='\e[0m'
ungu='\033[0;35m'
yellow='\e[33m'
WhiteBe='\e[5;37m'
GreenBe='\e[5;32m'
BlueCyan='\e[5;36m'
Xark='\e[0m'
clear

TOKEN_FILE="/etc/bot/.github_token"

function baris_panjang() {
  echo -e "${BlueCyan} ——————————————————————————— ${Xark} "
}

function Backup_Vps() {
  backup
}

function Restore_Vps() {
  restore
}

function Restore() {
  restorepot
}

function Auto_Backup_Vps() {
  autobackup
}

function Edit_Github_Token() {
  baris_panjang
  echo -e "${ungu}       Edit GitHub Token       ${Xark}"
  baris_panjang

  # Cek apakah file token ada
  if [[ -f "$TOKEN_FILE" ]]; then
    echo -e "${GreenBe}Token saat ini:${Xark}"
    cat "$TOKEN_FILE"
  else
    echo -e "${yellow}Token belum ada.${Xark}"
  fi

  echo
  read -p "Masukkan token baru: " new_token
  echo "$new_token" > "$TOKEN_FILE"
  chmod 600 "$TOKEN_FILE"
  echo -e "${GreenBe}Token berhasil disimpan di $TOKEN_FILE${Xark}"
  sleep 2
}

function Banner() {
  baris_panjang
  echo -e "${ungu}           Backup      ${Xark} "
  baris_panjang
}

function Menu_Features() {
  baris_panjang
  echo -e "${ungu}"
  echo " 1. Backup Vps Data  "
  echo " 2. Restore Vps Data "
  echo " 3. Auto Backup Vps "
  echo " 4. Edit GitHub Token"
  echo -e "${Xark}"
  echo -e "${yellow} x. Exit ${Xark}"
  baris_panjang
}

Banner
Menu_Features
read -p "Select [1-4 or x] :  " Ltt
case $Ltt in
1) clear ; Backup_Vps ;;
2) clear ; Restore_Vps ;;
3) clear ; Auto_Backup_Vps ;;
4) clear ; Edit_Github_Token ;;
*) exit ;;
esac
